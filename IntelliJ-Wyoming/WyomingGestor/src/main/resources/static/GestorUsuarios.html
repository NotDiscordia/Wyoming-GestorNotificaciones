<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Usuarios</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/CSS/GestorUsuarios.css" />
</head>
<body>
<div class="sidebar">
    <img src="https://static.wixstatic.com/media/d37dc4_5386a03afdd34069a3b43974d6b2a3ce~mv2.png/v1/fill/w_296,h_404,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/UABC_escudo_SER%20(2).png" alt="LogoUABC">
    <a href="principal.html">Volver al Menú Principal</a>
    <a href="GestorNoticias.html">Ir a Gestión de Noticias</a>
</div>

<div class="container">
    <div class="header">
        Bienvenido a la gestión de usuarios
        <button class="logout-button" window.location.href = "login.html";>
            &#128682; <!-- Icono de salida -->
        </button>
    </div>

    <div class="actions">
        <button class="icon-green" onclick="window.location.href='ResgistroUsuarios.html'">&#128101;</button> <!-- Icono de agregar usuario -->
        <button class="edit">&#9998;</button> <!-- Icono de lápiz (editar) -->
        <button class="delete">&#128465;</button> <!-- Icono de papelera (borrar) -->
        <button class="icon-green">&#8635;</button> <!-- Icono de actualizar -->
        <button class="icon-green">&#128214;</button> <!-- Icono de lista -->
        <button class="icon-green">&#128269;</button> <!-- Icono de lupa (buscar) -->
    </div>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Permisos</th>
        </tr>
        </thead>
        <tbody id="tablaUsuarios">
        <!-- Los datos se cargarán aquí -->
        </tbody>
    </table>
</div>

<div class="footer">
    <a href="ayuda.html">
        <span style="font-size: 2rem;">&#10067;</span>
    </a>
</div>

<script>
    // Función para cargar los datos desde el servlet
    function cargarUsuarios() {
        fetch('/gestorUsuarios')  // Llamada al servlet
            .then(response => response.json())  // Parsear la respuesta JSON
            .then(data => {
                const tbody = document.getElementById('tablaUsuarios');
                tbody.innerHTML = '';  // Limpiar la tabla antes de agregar los nuevos datos

                // Recorrer los administradores y agregar una fila a la tabla por cada uno
                data.forEach(usuario => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                            <td>${usuario.id}</td>
                            <td>${usuario.nombre}</td>
                            <td>${usuario.correo}</td>
                            <td>${usuario.permisos}</td>
                        `;
                    tbody.appendChild(tr);
                });
            })
            .catch(error => {
                console.error('Error al cargar los usuarios:', error);
            });
    }

    // Cargar los usuarios al cargar la página
    window.onload = cargarUsuarios;
</script>
</body>
</html>
